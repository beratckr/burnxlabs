---
import { getLangFromUrl, useTranslations } from '../i18n/utils';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

// Define translations for the form
const formTranslations = {
    en: {
        emailPlaceholder: "Enter your email",
        firstNamePlaceholder: "First name (optional)",
        submitButton: "Join the waitlist",
        disclaimer: "Get early access and launch updates. No spam, unsubscribe anytime.",
        successTitle: "You're on the list! 🎉",
        successMessage: "We've added",
        successMessage2: "to our waitlist.",
        successMessage3: "You'll be the first to know when BurnX launches!",
        emailError: "Please enter a valid email address"
    },
    tr: {
        emailPlaceholder: "E-posta adresinizi girin",
        firstNamePlaceholder: "Adınız (isteğe bağlı)",
        submitButton: "Bekleme listesine katıl",
        disclaimer: "Erken erişim ve lansman güncellemeleri alın. Spam yok, istediğiniz zaman aboneliği iptal edebilirsiniz.",
        successTitle: "Listedesiniz! 🎉",
        successMessage: "",
        successMessage2: "adresini bekleme listemize ekledik.",
        successMessage3: "BurnX lansmanında ilk siz haberdar olacaksınız!",
        emailError: "Lütfen geçerli bir e-posta adresi girin"
    }
};

const texts = formTranslations[lang] || formTranslations.en;
---

<div id="waitlist" class="bg-white rounded-2xl p-8 shadow-sm border border-gray-200 max-w-md mx-auto">
    <!-- This is a REAL form that will work without JavaScript -->
    <form 
        name="burnx-waitlist"
        method="POST"
        action="/success"
        data-netlify="true"
        data-netlify-honeypot="bot-field"
        class="space-y-4"
    >
        <!-- Honeypot field for spam protection -->
        <p class="hidden">
            <label>
                Don't fill this out if you're human: 
                <input name="bot-field" />
            </label>
        </p>
        
        <div>
            <input 
                type="email" 
                name="email"
                placeholder={texts.emailPlaceholder} 
                required
                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 transition-colors"
            />
        </div>
        
        <input 
            type="text"
            name="firstName"
            placeholder={texts.firstNamePlaceholder} 
            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 transition-colors"
        />
        
        <button 
            type="submit"
            class="w-full bg-purple-600 text-white py-3 rounded-lg font-medium hover:bg-purple-700 transition-all transform hover:scale-[1.02] active:scale-[0.98]"
        >
            {texts.submitButton}
        </button>
    </form>
    
    <p class="text-sm text-gray-500 mt-4">
        {texts.disclaimer}
    </p>
</div>